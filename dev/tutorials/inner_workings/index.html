<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Inner workings · Latexify.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Latexify.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Latexify.jl</a></li><li><a class="tocitem" href="../recipes/">Recipes</a></li><li><span class="tocitem">Use with other packages</span><ul><li><a class="tocitem" href="../parameterizedfunctions/">Use with ParameterizedFunctions</a></li><li><a class="tocitem" href="../DiffEqBiological/">Use with @reaction_network from DiffEqBiological.jl.</a></li></ul></li><li><a class="tocitem" href="../../arguments/">List of possible arguments</a></li><li class="is-active"><a class="tocitem" href>Inner workings</a><ul class="internal"><li><a class="tocitem" href="#Explanation-by-example"><span>Explanation by example</span></a></li><li><a class="tocitem" href="#Extended-functionality"><span>Extended functionality</span></a></li><li><a class="tocitem" href="#Latexifying-Arrays"><span>Latexifying Arrays</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Inner workings</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Inner workings</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/korsbo/Latexify.jl/blob/master/docs/src/tutorials/inner_workings.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Inner-workings"><a class="docs-heading-anchor" href="#Inner-workings">Inner workings</a><a id="Inner-workings-1"></a><a class="docs-heading-anchor-permalink" href="#Inner-workings" title="Permalink"></a></h1><p>This package contains a large number of methods, but two of these are of special importance. These are:</p><ul><li><code>latexraw(ex::Expr)</code></li></ul><p>and</p><ul><li><code>latexoperation(ex::Expr, prevOp::AbstractArray)</code></li></ul><p>These two methods are involved with all conversions to <span>$\LaTeX$</span> equations. </p><p><code>latexraw(ex::Expr)</code> utilises Julias homoiconicity to infer the correct latexification of an expression by recursing through the expression tree. Whenever it hits the end of a recursion it passes the last expression to <code>latexoperation()</code>. By the nature of this recursion, this expression is one which only contains symbols or strings.</p><h2 id="Explanation-by-example"><a class="docs-heading-anchor" href="#Explanation-by-example">Explanation by example</a><a id="Explanation-by-example-1"></a><a class="docs-heading-anchor-permalink" href="#Explanation-by-example" title="Permalink"></a></h2><p>Let&#39;s define a variable of the expression type:</p><pre><code class="language-julia-repl hljs">julia&gt; ex = :(x + y/z)</code></pre><p>This expression has a field which contains the first operation which must be done, along with the objects that this operation will operate on:</p><pre><code class="language-julia-repl hljs">julia&gt; ex.args

3-element Array{Any,1}:
 :+      
 :x      
 :(y / z)</code></pre><p>The first two element are both Symbols, while the third one is an expression:</p><pre><code class="language-julia-repl hljs">julia&gt; typeof.(ex.args)

3-element Array{DataType,1}:
 Symbol
 Symbol
 Expr</code></pre><p>Since at least one of these elements is an expression, the next step of the recursive algorithm is to dive into that expression:</p><pre><code class="language-julia-repl hljs">julia&gt; newEX = ex.args[3]
julia&gt; newEx.args

3-element Array{Any,1}:
 :/
 :y
 :z</code></pre><p>Since none of these arguments is another expression, <code>newEx</code> will be passed to <code>latexoperation()</code>. This function checks which mathematical operation is being done and converts newEx to an appropriately formatted string. In this case, that string will be &quot;\\frac{y}{z}&quot; (and yes, a double slash is needed).</p><p><code>newEx</code> is now a string (despite its name):</p><pre><code class="language-julia hljs">julia&gt; newEx

&quot;\\frac{y}{z}&quot;</code></pre><p>The recursive <code>latexraw()</code> pulls this value back to the original expression <code>ex</code>, such that:</p><pre><code class="language-julia-repl hljs">julia&gt; ex.args

3-element Array{Any,1}:
 :+      
 :x      
 :&quot;\\frac{y}{z}&quot;</code></pre><p>Now, since this expression does not consist of any further expressions, it is passed to <code>latexoperation()</code>. The operator is now &quot;+&quot;, and it should be applied on the second and third element of the expression, resulting in:</p><pre><code class="language-julia hljs">&quot;x + \\frac{y}{z}&quot;</code></pre><p>using the print function you get:</p><pre><code class="language-julia-repl hljs">julia&gt; print(latexraw(ex))

&quot;x + \frac{y}{z}&quot;</code></pre><p>which in a <span>$\LaTeX$</span> maths environment renders as:</p><p class="math-container">\[x + \frac{y}{z}\]</p><h2 id="Extended-functionality"><a class="docs-heading-anchor" href="#Extended-functionality">Extended functionality</a><a id="Extended-functionality-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-functionality" title="Permalink"></a></h2><p>With the above example we can understand how an expression is converted to a <span>$\LaTeX$</span> formatted string (unless my pedagogical skills are worse than I fear).</p><p>So, anything which can be converted to a Julia expression of the Expr type can be latexified. Luckily, since Julia needs to convert your code to expressions before it can be evaluated, Julia is already great at doing this.</p><p>There are already some methods for converting other types to expressions and passing them to the core method, for example:</p><pre><code class="language-julia hljs">latexraw(str::String) = latexraw(parse(str))</code></pre><p>but if you find yourself wanting to parse some other type, it is often easy to overload the <code>latexraw</code> function.</p><h2 id="Latexifying-Arrays"><a class="docs-heading-anchor" href="#Latexifying-Arrays">Latexifying Arrays</a><a id="Latexifying-Arrays-1"></a><a class="docs-heading-anchor-permalink" href="#Latexifying-Arrays" title="Permalink"></a></h2><p>Also, if you pass an array to <code>latexraw</code>, it will recursively try to convert the elements of that array to <span>$\LaTeX$</span> formatted strings.</p><pre><code class="language-julia-repl hljs">julia&gt; arr = [:(x-y/(k_10+z)), &quot;x*y*z/3&quot;]
julia&gt; latexraw(arr)
2-element Array{String,1}:
 &quot;x - \\frac{y}{k_{10} + z}&quot;     
 &quot;\\frac{x \\cdot y \\cdot z}{3}&quot;

julia&gt; println.(latexraw(arr))
x - \frac{y}{k_{10} + z}
\frac{x \cdot y \cdot z}{3}</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../arguments/">« List of possible arguments</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.9 on <span class="colophon-date" title="Monday 18 October 2021 11:39">Monday 18 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
